#!/usr/bin/python3

import os
from os import path
import subprocess
import time

prime_path  = os.environ.get('PRIME_PATH') 
cfg_dir = path.join(prime_path, "xml")
out_dir = path.join(prime_path, "output")

benchmarks=["bt.W.x", "cg.W.x", "ep.W.x", "is.W.x", "sp.W.x", "mg.W.x", "lu.W.x", "ua.W.x", "ft.W.x", "dc.W.x"]

for bench in benchmarks:
	for pr in ["mesi", "wu"]:
	    for c in [1, 2, 4, 8, 16]:
	        subprocess.call(["run_prime", 
	            "-c", path.join(cfg_dir, "bc_%s_c%d.xml" % (pr, c)), 
	            "-o", path.join(out_dir, "%s_bc_%s_c%d.out" % (bench, pr, c)),
	            "-t", str(c),
	            "-p", "-c%d -t23:00:00" % (c+2 if c < 8 else 10), 
	            "-b", 
	            bench])
	        time.sleep(1)
